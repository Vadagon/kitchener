(()=>{var e={997:(e,t,r)=>{e.exports=function e(t,r,o){function n(i,s){if(!r[i]){if(!t[i]){if(a)return a(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var c=r[i]={exports:{}};t[i][0].call(c.exports,(function(e){return n(t[i][1][e]||e)}),c,c.exports,e,t,r,o)}return r[i].exports}for(var a=void 0,i=0;i<o.length;i++)n(o[i]);return n}({1:[function(e,t,r){"use strict";var o,n="undefined"!=typeof window?window:"undefined"!=typeof self?self:null;o=n?"signal"in new Request("https://airtable.com")?n.AbortController:e("abortcontroller-polyfill/dist/cjs-ponyfill").AbortController:e("abort-controller"),t.exports=o},{"abort-controller":20,"abortcontroller-polyfill/dist/cjs-ponyfill":19}],2:[function(e,t,r){"use strict";var o=function(){function e(e,t,r){this.error=e,this.message=t,this.statusCode=r}return e.prototype.toString=function(){return[this.message,"(",this.error,")",this.statusCode?"[Http code "+this.statusCode+"]":""].join("")},e}();t.exports=o},{}],3:[function(e,t,r){"use strict";var o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},a=n(e("lodash/get")),i=n(e("lodash/isPlainObject")),s=n(e("lodash/keys")),u=n(e("./fetch")),c=n(e("./abort-controller")),l=n(e("./object_to_query_param_string")),f=n(e("./airtable_error")),d=n(e("./table")),h=n(e("./http_headers")),p=n(e("./run_action")),_=n(e("./package_version")),b=n(e("./exponential_backoff_with_jitter")),y="Airtable.js/"+_.default,v=function(){function e(e,t){this._airtable=e,this._id=t}return e.prototype.table=function(e){return new d.default(this,null,e)},e.prototype.makeRequest=function(e){var t,r=this;void 0===e&&(e={});var n=a.default(e,"method","GET").toUpperCase(),i=this._airtable._endpointUrl+"/v"+this._airtable._apiVersionMajor+"/"+this._id+a.default(e,"path","/")+"?"+l.default(a.default(e,"qs",{})),s=new c.default,d={method:n,headers:this._getRequestHeaders(Object.assign({},this._airtable._customHeaders,null!==(t=e.headers)&&void 0!==t?t:{})),signal:s.signal};"body"in e&&function(e){return"GET"!==e&&"DELETE"!==e}(n)&&(d.body=JSON.stringify(e.body));var h=setTimeout((function(){s.abort()}),this._airtable._requestTimeout);return new Promise((function(t,n){u.default(i,d).then((function(i){if(clearTimeout(h),429!==i.status||r._airtable._noRetryIfRateLimited)i.json().then((function(e){var o=r._checkStatusForError(i.status,e)||g(i.status,e);o?n(o):t({statusCode:i.status,headers:i.headers,body:e})})).catch((function(){var e=g(i.status);n(e)}));else{var s=a.default(e,"_numAttempts",0),u=b.default(s);setTimeout((function(){var a=o(o({},e),{_numAttempts:s+1});r.makeRequest(a).then(t).catch(n)}),u)}})).catch((function(e){clearTimeout(h),e=new f.default("CONNECTION_ERROR",e.message,null),n(e)}))}))},e.prototype.runAction=function(e,t,r,o,n){p.default(this,e,t,r,o,n,0)},e.prototype._getRequestHeaders=function(e){var t=new h.default;t.set("Authorization","Bearer "+this._airtable._apiKey),t.set("User-Agent",y),t.set("Content-Type","application/json");for(var r=0,o=s.default(e);r<o.length;r++){var n=o[r];t.set(n,e[n])}return t.toJSON()},e.prototype._checkStatusForError=function(e,t){var r=(null!=t?t:{error:{}}).error,o=void 0===r?{}:r,n=o.type,a=o.message;return 401===e?new f.default("AUTHENTICATION_REQUIRED","You should provide valid api key to perform this operation",e):403===e?new f.default("NOT_AUTHORIZED","You are not authorized to perform this operation",e):404===e?new f.default("NOT_FOUND",null!=a?a:"Could not find what you are looking for",e):413===e?new f.default("REQUEST_TOO_LARGE","Request body is too large",e):422===e?new f.default(null!=n?n:"UNPROCESSABLE_ENTITY",null!=a?a:"The operation cannot be processed",e):429===e?new f.default("TOO_MANY_REQUESTS","You have made too many requests in a short period of time. Please retry your request later",e):500===e?new f.default("SERVER_ERROR","Try again. If the problem persists, contact support.",e):503===e?new f.default("SERVICE_UNAVAILABLE","The service is temporarily unavailable. Please retry shortly.",e):e>=400?new f.default(null!=n?n:"UNEXPECTED_ERROR",null!=a?a:"An unexpected error occurred",e):null},e.prototype.doCall=function(e){return this.table(e)},e.prototype.getId=function(){return this._id},e.createFunctor=function(t,r){var o=new e(t,r),n=function(e){return o.doCall(e)};return n._base=o,n.table=o.table.bind(o),n.makeRequest=o.makeRequest.bind(o),n.runAction=o.runAction.bind(o),n.getId=o.getId.bind(o),n},e}();function g(e,t){return i.default(t)?null:new f.default("UNEXPECTED_ERROR","The response from Airtable was invalid JSON. Please try again soon.",e)}t.exports=v},{"./abort-controller":1,"./airtable_error":2,"./exponential_backoff_with_jitter":6,"./fetch":7,"./http_headers":9,"./object_to_query_param_string":11,"./package_version":12,"./run_action":16,"./table":17,"lodash/get":77,"lodash/isPlainObject":89,"lodash/keys":93}],4:[function(e,t,r){"use strict";t.exports=function(e,t,r){return void 0===r&&(r=void 0),function(){for(var o,n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];if("function"!=typeof n[o=void 0===r?n.length>0?n.length-1:0:r]){for(var i=[],s=Math.max(n.length,o),u=0;u<s;u++)i.push(n[u]);return new Promise((function(r,o){i.push((function(e,t){e?o(e):r(t)})),e.apply(t,i)}))}e.apply(t,n)}}},{}],5:[function(e,t,r){"use strict";var o={};t.exports=function(e,t,r){return function(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];o[t]||(o[t]=!0,console.warn(r)),e.apply(this,n)}}},{}],6:[function(e,t,r){"use strict";var o=(this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(e("./internal_config.json"));t.exports=function(e){var t=o.default.INITIAL_RETRY_DELAY_IF_RATE_LIMITED*Math.pow(2,e),r=Math.min(o.default.MAX_RETRY_DELAY_IF_RATE_LIMITED,t);return Math.random()*r}},{"./internal_config.json":10}],7:[function(e,t,r){"use strict";var o=(this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(e("node-fetch")),n="undefined"!=typeof window?window:"undefined"!=typeof self?self:null;t.exports=n?n.fetch.bind(n):o.default},{"node-fetch":20}],8:[function(e,t,r){"use strict";t.exports=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},{}],9:[function(e,t,r){"use strict";var o=(this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(e("lodash/keys")),n="undefined"!=typeof window,a=function(){function e(){this._headersByLowercasedKey={}}return e.prototype.set=function(e,t){var r=e.toLowerCase();"x-airtable-user-agent"===r&&(r="user-agent",e="User-Agent"),this._headersByLowercasedKey[r]={headerKey:e,headerValue:t}},e.prototype.toJSON=function(){for(var e={},t=0,r=o.default(this._headersByLowercasedKey);t<r.length;t++){var a=r[t],i=this._headersByLowercasedKey[a];e[n&&"user-agent"===a?"X-Airtable-User-Agent":i.headerKey]=i.headerValue}return e},e}();t.exports=a},{"lodash/keys":93}],10:[function(e,t,r){t.exports={INITIAL_RETRY_DELAY_IF_RATE_LIMITED:5e3,MAX_RETRY_DELAY_IF_RATE_LIMITED:6e5}},{}],11:[function(e,t,r){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=o(e("lodash/isArray")),a=o(e("lodash/isNil")),i=o(e("lodash/keys"));function s(e,t,r){if(n.default(t))for(var o=0;o<t.length;o++){var a=t[o];/\[\]$/.test(e)?r(e,a):s(e+"["+("object"==typeof a&&null!==a?o:"")+"]",a,r)}else if("object"==typeof t)for(var u=0,c=i.default(t);u<c.length;u++){var l=c[u];s(e+"["+l+"]",a=t[l],r)}else r(e,t)}t.exports=function(e){for(var t=[],r=function(e,r){r=a.default(r)?"":r,t.push(encodeURIComponent(e)+"="+encodeURIComponent(r))},o=0,n=i.default(e);o<n.length;o++){var u=n[o];s(u,e[u],r)}return t.join("&").replace(/%20/g,"+")}},{"lodash/isArray":79,"lodash/isNil":85,"lodash/keys":93}],12:[function(e,t,r){"use strict";t.exports="0.12.2"},{}],13:[function(e,t,r){"use strict";var o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},a=n(e("lodash/isFunction")),i=n(e("lodash/keys")),s=n(e("./record")),u=n(e("./callback_to_promise")),c=n(e("./has")),l=e("./query_params"),f=n(e("./object_to_query_param_string")),d=function(){function e(e,t){this._table=e,this._params=t,this.firstPage=u.default(h,this),this.eachPage=u.default(p,this,1),this.all=u.default(_,this)}return e.validateParams=function(t){for(var r={},o=[],n=[],a=0,s=i.default(t);a<s.length;a++){var u=s[a],l=t[u];if(c.default(e.paramValidators,u)){var f=(0,e.paramValidators[u])(l);f.pass?r[u]=l:n.push(f.error)}else o.push(u)}return{validParams:r,ignoredKeys:o,errors:n}},e.paramValidators=l.paramValidators,e}();function h(e){if(!a.default(e))throw new Error("The first parameter to `firstPage` must be a function");this.eachPage((function(t){e(null,t)}),(function(t){e(t,null)}))}function p(e,t){var r=this;if(!a.default(e))throw new Error("The first parameter to `eachPage` must be a function");if(!a.default(t)&&void 0!==t)throw new Error("The second parameter to `eachPage` must be a function or undefined");var n,i,u=o({},this._params),c="/"+this._table._urlEncodedNameOrId()+"?"+f.default(u),d={},h=null;if("post"===u.method||c.length>l.URL_CHARACTER_LENGTH_LIMIT){h=u,n="post",i="/"+this._table._urlEncodedNameOrId()+"/listRecords";for(var p=0,_=Object.keys(u);p<_.length;p++){var b=_[p];l.shouldListRecordsParamBePassedAsParameter(b)?d[b]=u[b]:h[b]=u[b]}}else n="get",d=u,i="/"+this._table._urlEncodedNameOrId();var y=function(){r._table._base.runAction(n,i,d,h,(function(o,n,a){if(o)t(o,null);else{var i=void 0;a.offset?(u.offset=a.offset,i=y):i=function(){t(null)};var c=a.records.map((function(e){return new s.default(r._table,null,e)}));e(c,i)}}))};y()}function _(e){if(!a.default(e))throw new Error("The first parameter to `all` must be a function");var t=[];this.eachPage((function(e,r){t.push.apply(t,e),r()}),(function(r){r?e(r,null):e(null,t)}))}t.exports=d},{"./callback_to_promise":4,"./has":8,"./object_to_query_param_string":11,"./query_params":14,"./record":15,"lodash/isFunction":83,"lodash/keys":93}],14:[function(e,t,r){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.shouldListRecordsParamBePassedAsParameter=r.URL_CHARACTER_LENGTH_LIMIT=r.paramValidators=void 0;var n=o(e("./typecheck")),a=o(e("lodash/isString")),i=o(e("lodash/isNumber")),s=o(e("lodash/isPlainObject")),u=o(e("lodash/isBoolean"));r.paramValidators={fields:n.default(n.default.isArrayOf(a.default),"the value for `fields` should be an array of strings"),filterByFormula:n.default(a.default,"the value for `filterByFormula` should be a string"),maxRecords:n.default(i.default,"the value for `maxRecords` should be a number"),pageSize:n.default(i.default,"the value for `pageSize` should be a number"),offset:n.default(i.default,"the value for `offset` should be a number"),sort:n.default(n.default.isArrayOf((function(e){return s.default(e)&&a.default(e.field)&&(void 0===e.direction||["asc","desc"].includes(e.direction))})),'the value for `sort` should be an array of sort objects. Each sort object must have a string `field` value, and an optional `direction` value that is "asc" or "desc".'),view:n.default(a.default,"the value for `view` should be a string"),cellFormat:n.default((function(e){return a.default(e)&&["json","string"].includes(e)}),'the value for `cellFormat` should be "json" or "string"'),timeZone:n.default(a.default,"the value for `timeZone` should be a string"),userLocale:n.default(a.default,"the value for `userLocale` should be a string"),method:n.default((function(e){return a.default(e)&&["get","post"].includes(e)}),'the value for `method` should be "get" or "post"'),returnFieldsByFieldId:n.default(u.default,"the value for `returnFieldsByFieldId` should be a boolean"),recordMetadata:n.default(n.default.isArrayOf(a.default),"the value for `recordMetadata` should be an array of strings")},r.URL_CHARACTER_LENGTH_LIMIT=15e3,r.shouldListRecordsParamBePassedAsParameter=function(e){return"timeZone"===e||"userLocale"===e}},{"./typecheck":18,"lodash/isBoolean":81,"lodash/isNumber":86,"lodash/isPlainObject":89,"lodash/isString":90}],15:[function(e,t,r){"use strict";var o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)},n=(this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(e("./callback_to_promise")),a=function(){function e(e,t,r){this._table=e,this.id=t||r.id,r&&(this.commentCount=r.commentCount),this.setRawJson(r),this.save=n.default(i,this),this.patchUpdate=n.default(s,this),this.putUpdate=n.default(u,this),this.destroy=n.default(c,this),this.fetch=n.default(l,this),this.updateFields=this.patchUpdate,this.replaceFields=this.putUpdate}return e.prototype.getId=function(){return this.id},e.prototype.get=function(e){return this.fields[e]},e.prototype.set=function(e,t){this.fields[e]=t},e.prototype.setRawJson=function(e){this._rawJson=e,this.fields=this._rawJson&&this._rawJson.fields||{}},e}();function i(e){this.putUpdate(this.fields,e)}function s(e,t,r){var n=this;r||(r=t,t={});var a=o({fields:e},t);this._table._base.runAction("patch","/"+this._table._urlEncodedNameOrId()+"/"+this.id,{},a,(function(e,t,o){e?r(e):(n.setRawJson(o),r(null,n))}))}function u(e,t,r){var n=this;r||(r=t,t={});var a=o({fields:e},t);this._table._base.runAction("put","/"+this._table._urlEncodedNameOrId()+"/"+this.id,{},a,(function(e,t,o){e?r(e):(n.setRawJson(o),r(null,n))}))}function c(e){var t=this;this._table._base.runAction("delete","/"+this._table._urlEncodedNameOrId()+"/"+this.id,{},null,(function(r){r?e(r):e(null,t)}))}function l(e){var t=this;this._table._base.runAction("get","/"+this._table._urlEncodedNameOrId()+"/"+this.id,{},null,(function(r,o,n){r?e(r):(t.setRawJson(n),e(null,t))}))}t.exports=a},{"./callback_to_promise":4}],16:[function(e,t,r){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=o(e("./exponential_backoff_with_jitter")),a=o(e("./object_to_query_param_string")),i=o(e("./package_version")),s=o(e("./fetch")),u=o(e("./abort-controller")),c="Airtable.js/"+i.default;t.exports=function e(t,r,o,i,l,f,d){var h=t._airtable._endpointUrl+"/v"+t._airtable._apiVersionMajor+"/"+t._id+o+"?"+a.default(i),p={authorization:"Bearer "+t._airtable._apiKey,"x-api-version":t._airtable._apiVersion,"x-airtable-application-id":t.getId(),"content-type":"application/json"};"undefined"!=typeof window?p["x-airtable-user-agent"]=c:p["User-Agent"]=c;var _=new u.default,b=r.toUpperCase(),y={method:b,headers:p,signal:_.signal};null!==l&&("GET"===b||"HEAD"===b?console.warn("body argument to runAction are ignored with GET or HEAD requests"):y.body=JSON.stringify(l));var v=setTimeout((function(){_.abort()}),t._airtable._requestTimeout);s.default(h,y).then((function(a){if(clearTimeout(v),429!==a.status||t._airtable._noRetryIfRateLimited)a.json().then((function(e){var r=t._checkStatusForError(a.status,e),o={};Object.keys(a).forEach((function(e){o[e]=a[e]})),o.body=e,o.statusCode=a.status,f(r,o,e)})).catch((function(){f(t._checkStatusForError(a.status))}));else{var s=n.default(d);setTimeout((function(){e(t,r,o,i,l,f,d+1)}),s)}})).catch((function(e){clearTimeout(v),f(e)}))}},{"./abort-controller":1,"./exponential_backoff_with_jitter":6,"./fetch":7,"./object_to_query_param_string":11,"./package_version":12}],17:[function(e,t,r){"use strict";var o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},a=n(e("lodash/isPlainObject")),i=n(e("./deprecate")),s=n(e("./query")),u=e("./query_params"),c=n(e("./object_to_query_param_string")),l=n(e("./record")),f=n(e("./callback_to_promise")),d=function(){function e(e,t,r){if(!t&&!r)throw new Error("Table name or table ID is required");this._base=e,this.id=t,this.name=r,this.find=f.default(this._findRecordById,this),this.select=this._selectRecords.bind(this),this.create=f.default(this._createRecords,this),this.update=f.default(this._updateRecords.bind(this,!1),this),this.replace=f.default(this._updateRecords.bind(this,!0),this),this.destroy=f.default(this._destroyRecord,this),this.list=i.default(this._listRecords.bind(this),"table.list","Airtable: `list()` is deprecated. Use `select()` instead."),this.forEach=i.default(this._forEachRecord.bind(this),"table.forEach","Airtable: `forEach()` is deprecated. Use `select()` instead.")}return e.prototype._findRecordById=function(e,t){new l.default(this,e).fetch(t)},e.prototype._selectRecords=function(e){if(void 0===e&&(e={}),arguments.length>1&&console.warn("Airtable: `select` takes only one parameter, but it was given "+arguments.length+" parameters. Use `eachPage` or `firstPage` to fetch records."),a.default(e)){var t=s.default.validateParams(e);if(t.errors.length){var r=t.errors.map((function(e){return"  * "+e}));throw new Error("Airtable: invalid parameters for `select`:\n"+r.join("\n"))}return t.ignoredKeys.length&&console.warn("Airtable: the following parameters to `select` will be ignored: "+t.ignoredKeys.join(", ")),new s.default(this,t.validParams)}throw new Error("Airtable: the parameter for `select` should be a plain object or undefined.")},e.prototype._urlEncodedNameOrId=function(){return this.id||encodeURIComponent(this.name)},e.prototype._createRecords=function(e,t,r){var n,a=this,i=Array.isArray(e);r||(r=t,t={}),n=o(i?{records:e}:{fields:e},t),this._base.runAction("post","/"+this._urlEncodedNameOrId()+"/",{},n,(function(e,t,o){var n;e?r(e):(n=i?o.records.map((function(e){return new l.default(a,e.id,e)})):new l.default(a,o.id,o),r(null,n))}))},e.prototype._updateRecords=function(e,t,r,n,i){var s,u=this;if(Array.isArray(t)){var c=t;s=a.default(r)?r:{},i=n||r;var f=e?"put":"patch",d=o({records:c},s);this._base.runAction(f,"/"+this._urlEncodedNameOrId()+"/",{},d,(function(e,t,r){if(e)i(e);else{var o=r.records.map((function(e){return new l.default(u,e.id,e)}));i(null,o)}}))}else{var h=t,p=r;s=a.default(n)?n:{},i=i||n;var _=new l.default(this,h);e?_.putUpdate(p,s,i):_.patchUpdate(p,s,i)}},e.prototype._destroyRecord=function(e,t){var r=this;if(Array.isArray(e)){var o={records:e};this._base.runAction("delete","/"+this._urlEncodedNameOrId(),o,null,(function(e,o,n){if(e)t(e);else{var a=n.records.map((function(e){var t=e.id;return new l.default(r,t,null)}));t(null,a)}}))}else new l.default(this,e).destroy(t)},e.prototype._listRecords=function(e,t,r,n){var a=this;n||(n=r,r={});var i,s,f="/"+this._urlEncodedNameOrId()+"?"+c.default(r),d={},h=null;if("function"!=typeof r&&"post"===r.method||f.length>u.URL_CHARACTER_LENGTH_LIMIT){i="/"+this._urlEncodedNameOrId()+"/listRecords",h=o(o({},e&&{pageSize:e}),t&&{offset:t}),s="post";for(var p=0,_=Object.keys(r);p<_.length;p++){var b=_[p];u.shouldListRecordsParamBePassedAsParameter(b)?d[b]=r[b]:h[b]=r[b]}}else s="get",i="/"+this._urlEncodedNameOrId()+"/",d=o({limit:e,offset:t},r);this._base.runAction(s,i,d,h,(function(e,t,r){if(e)n(e);else{var o=r.records.map((function(e){return new l.default(a,null,e)}));n(null,o,r.offset)}}))},e.prototype._forEachRecord=function(t,r,o){var n=this;2===arguments.length&&(o=r,r=t,t={});var a=e.__recordsPerPageForIteration||100,i=null,s=function(){n._listRecords(a,i,t,(function(e,t,n){if(e)o(e);else{for(var a=0;a<t.length;a++)r(t[a]);n?(i=n,s()):o()}}))};s()},e}();t.exports=d},{"./callback_to_promise":4,"./deprecate":5,"./object_to_query_param_string":11,"./query":13,"./query_params":14,"./record":15,"lodash/isPlainObject":89}],18:[function(e,t,r){"use strict";function o(e,t){return function(r){return e(r)?{pass:!0}:{pass:!1,error:t}}}o.isOneOf=function(e){return e.includes.bind(e)},o.isArrayOf=function(e){return function(t){return Array.isArray(t)&&t.every(e)}},t.exports=o},{}],19:[function(e,t,r){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}function i(e){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},i(e)}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t,r){return c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=i(e)););return e}(e,t);if(o){var n=Object.getOwnPropertyDescriptor(o,t);return n.get?n.get.call(r):n.value}},c(e,t,r||e)}Object.defineProperty(r,"__esModule",{value:!0});var l=function(){function e(){o(this,e),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return a(e,[{key:"addEventListener",value:function(e,t){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push(t)}},{key:"removeEventListener",value:function(e,t){if(e in this.listeners)for(var r=this.listeners[e],o=0,n=r.length;o<n;o++)if(r[o]===t)return void r.splice(o,1)}},{key:"dispatchEvent",value:function(e){var t=this;if(e.type in this.listeners){for(var r=function(r){setTimeout((function(){return r.call(t,e)}))},o=this.listeners[e.type],n=0,a=o.length;n<a;n++)r(o[n]);return!e.defaultPrevented}}}]),e}(),f=function(e){function t(){var e;return o(this,t),(e=function(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?u(e):t}(this,i(t).call(this))).listeners||l.call(u(e)),Object.defineProperty(u(e),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(u(e),"onabort",{value:null,writable:!0,configurable:!0}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,e),a(t,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(e){"abort"===e.type&&(this.aborted=!0,"function"==typeof this.onabort&&this.onabort.call(this,e)),c(i(t.prototype),"dispatchEvent",this).call(this,e)}}]),t}(l),d=function(){function e(){o(this,e),Object.defineProperty(this,"signal",{value:new f,writable:!0,configurable:!0})}return a(e,[{key:"abort",value:function(){var e;try{e=new Event("abort")}catch(t){"undefined"!=typeof document?document.createEvent?(e=document.createEvent("Event")).initEvent("abort",!1,!1):(e=document.createEventObject()).type="abort":e={type:"abort",bubbles:!1,cancelable:!1}}this.signal.dispatchEvent(e)}},{key:"toString",value:function(){return"[object AbortController]"}}]),e}();"undefined"!=typeof Symbol&&Symbol.toStringTag&&(d.prototype[Symbol.toStringTag]="AbortController",f.prototype[Symbol.toStringTag]="AbortSignal"),r.AbortController=d,r.AbortSignal=f,r.abortableFetch=function(e){"function"==typeof e&&(e={fetch:e});var t=e,r=t.fetch,o=t.Request,n=void 0===o?r.Request:o,a=t.AbortController,i=t.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL,s=void 0!==i&&i;if(!function(e){return e.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),!0):"function"==typeof e.Request&&!e.Request.prototype.hasOwnProperty("signal")||!e.AbortController}({fetch:r,Request:n,AbortController:a,__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL:s}))return{fetch:r,Request:u};var u=n;(u&&!u.prototype.hasOwnProperty("signal")||s)&&((u=function(e,t){var r;t&&t.signal&&(r=t.signal,delete t.signal);var o=new n(e,t);return r&&Object.defineProperty(o,"signal",{writable:!1,enumerable:!1,configurable:!0,value:r}),o}).prototype=n.prototype);var c=r;return{fetch:function(e,t){var r=u&&u.prototype.isPrototypeOf(e)?e.signal:t?t.signal:void 0;if(r){var o;try{o=new DOMException("Aborted","AbortError")}catch(e){(o=new Error("Aborted")).name="AbortError"}if(r.aborted)return Promise.reject(o);var n=new Promise((function(e,t){r.addEventListener("abort",(function(){return t(o)}),{once:!0})}));return t&&t.signal&&delete t.signal,Promise.race([n,c(e,t)])}return c(e,t)},Request:u}}},{}],20:[function(e,t,r){},{}],21:[function(e,t,r){var o=e("./_hashClear"),n=e("./_hashDelete"),a=e("./_hashGet"),i=e("./_hashHas"),s=e("./_hashSet");function u(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}u.prototype.clear=o,u.prototype.delete=n,u.prototype.get=a,u.prototype.has=i,u.prototype.set=s,t.exports=u},{"./_hashClear":46,"./_hashDelete":47,"./_hashGet":48,"./_hashHas":49,"./_hashSet":50}],22:[function(e,t,r){var o=e("./_listCacheClear"),n=e("./_listCacheDelete"),a=e("./_listCacheGet"),i=e("./_listCacheHas"),s=e("./_listCacheSet");function u(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}u.prototype.clear=o,u.prototype.delete=n,u.prototype.get=a,u.prototype.has=i,u.prototype.set=s,t.exports=u},{"./_listCacheClear":56,"./_listCacheDelete":57,"./_listCacheGet":58,"./_listCacheHas":59,"./_listCacheSet":60}],23:[function(e,t,r){var o=e("./_getNative")(e("./_root"),"Map");t.exports=o},{"./_getNative":42,"./_root":72}],24:[function(e,t,r){var o=e("./_mapCacheClear"),n=e("./_mapCacheDelete"),a=e("./_mapCacheGet"),i=e("./_mapCacheHas"),s=e("./_mapCacheSet");function u(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}u.prototype.clear=o,u.prototype.delete=n,u.prototype.get=a,u.prototype.has=i,u.prototype.set=s,t.exports=u},{"./_mapCacheClear":61,"./_mapCacheDelete":62,"./_mapCacheGet":63,"./_mapCacheHas":64,"./_mapCacheSet":65}],25:[function(e,t,r){var o=e("./_root").Symbol;t.exports=o},{"./_root":72}],26:[function(e,t,r){var o=e("./_baseTimes"),n=e("./isArguments"),a=e("./isArray"),i=e("./isBuffer"),s=e("./_isIndex"),u=e("./isTypedArray"),c=Object.prototype.hasOwnProperty;t.exports=function(e,t){var r=a(e),l=!r&&n(e),f=!r&&!l&&i(e),d=!r&&!l&&!f&&u(e),h=r||l||f||d,p=h?o(e.length,String):[],_=p.length;for(var b in e)!t&&!c.call(e,b)||h&&("length"==b||f&&("offset"==b||"parent"==b)||d&&("buffer"==b||"byteLength"==b||"byteOffset"==b)||s(b,_))||p.push(b);return p}},{"./_baseTimes":35,"./_isIndex":51,"./isArguments":78,"./isArray":79,"./isBuffer":82,"./isTypedArray":92}],27:[function(e,t,r){t.exports=function(e,t){for(var r=-1,o=null==e?0:e.length,n=Array(o);++r<o;)n[r]=t(e[r],r,e);return n}},{}],28:[function(e,t,r){var o=e("./eq");t.exports=function(e,t){for(var r=e.length;r--;)if(o(e[r][0],t))return r;return-1}},{"./eq":76}],29:[function(e,t,r){var o=e("./_castPath"),n=e("./_toKey");t.exports=function(e,t){for(var r=0,a=(t=o(t,e)).length;null!=e&&r<a;)e=e[n(t[r++])];return r&&r==a?e:void 0}},{"./_castPath":38,"./_toKey":74}],30:[function(e,t,r){var o=e("./_Symbol"),n=e("./_getRawTag"),a=e("./_objectToString"),i=o?o.toStringTag:void 0;t.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":i&&i in Object(e)?n(e):a(e)}},{"./_Symbol":25,"./_getRawTag":44,"./_objectToString":70}],31:[function(e,t,r){var o=e("./_baseGetTag"),n=e("./isObjectLike");t.exports=function(e){return n(e)&&"[object Arguments]"==o(e)}},{"./_baseGetTag":30,"./isObjectLike":88}],32:[function(e,t,r){var o=e("./isFunction"),n=e("./_isMasked"),a=e("./isObject"),i=e("./_toSource"),s=/^\[object .+?Constructor\]$/,u=Function.prototype,c=Object.prototype,l=u.toString,f=c.hasOwnProperty,d=RegExp("^"+l.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(e){return!(!a(e)||n(e))&&(o(e)?d:s).test(i(e))}},{"./_isMasked":54,"./_toSource":75,"./isFunction":83,"./isObject":87}],33:[function(e,t,r){var o=e("./_baseGetTag"),n=e("./isLength"),a=e("./isObjectLike"),i={};i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0,i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object DataView]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1,t.exports=function(e){return a(e)&&n(e.length)&&!!i[o(e)]}},{"./_baseGetTag":30,"./isLength":84,"./isObjectLike":88}],34:[function(e,t,r){var o=e("./_isPrototype"),n=e("./_nativeKeys"),a=Object.prototype.hasOwnProperty;t.exports=function(e){if(!o(e))return n(e);var t=[];for(var r in Object(e))a.call(e,r)&&"constructor"!=r&&t.push(r);return t}},{"./_isPrototype":55,"./_nativeKeys":68}],35:[function(e,t,r){t.exports=function(e,t){for(var r=-1,o=Array(e);++r<e;)o[r]=t(r);return o}},{}],36:[function(e,t,r){var o=e("./_Symbol"),n=e("./_arrayMap"),a=e("./isArray"),i=e("./isSymbol"),s=o?o.prototype:void 0,u=s?s.toString:void 0;t.exports=function e(t){if("string"==typeof t)return t;if(a(t))return n(t,e)+"";if(i(t))return u?u.call(t):"";var r=t+"";return"0"==r&&1/t==-1/0?"-0":r}},{"./_Symbol":25,"./_arrayMap":27,"./isArray":79,"./isSymbol":91}],37:[function(e,t,r){t.exports=function(e){return function(t){return e(t)}}},{}],38:[function(e,t,r){var o=e("./isArray"),n=e("./_isKey"),a=e("./_stringToPath"),i=e("./toString");t.exports=function(e,t){return o(e)?e:n(e,t)?[e]:a(i(e))}},{"./_isKey":52,"./_stringToPath":73,"./isArray":79,"./toString":96}],39:[function(e,t,r){var o=e("./_root")["__core-js_shared__"];t.exports=o},{"./_root":72}],40:[function(e,t,o){(function(e){var r="object"==typeof e&&e&&e.Object===Object&&e;t.exports=r}).call(this,void 0!==r.g?r.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],41:[function(e,t,r){var o=e("./_isKeyable");t.exports=function(e,t){var r=e.__data__;return o(t)?r["string"==typeof t?"string":"hash"]:r.map}},{"./_isKeyable":53}],42:[function(e,t,r){var o=e("./_baseIsNative"),n=e("./_getValue");t.exports=function(e,t){var r=n(e,t);return o(r)?r:void 0}},{"./_baseIsNative":32,"./_getValue":45}],43:[function(e,t,r){var o=e("./_overArg")(Object.getPrototypeOf,Object);t.exports=o},{"./_overArg":71}],44:[function(e,t,r){var o=e("./_Symbol"),n=Object.prototype,a=n.hasOwnProperty,i=n.toString,s=o?o.toStringTag:void 0;t.exports=function(e){var t=a.call(e,s),r=e[s];try{e[s]=void 0;var o=!0}catch(e){}var n=i.call(e);return o&&(t?e[s]=r:delete e[s]),n}},{"./_Symbol":25}],45:[function(e,t,r){t.exports=function(e,t){return null==e?void 0:e[t]}},{}],46:[function(e,t,r){var o=e("./_nativeCreate");t.exports=function(){this.__data__=o?o(null):{},this.size=0}},{"./_nativeCreate":67}],47:[function(e,t,r){t.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},{}],48:[function(e,t,r){var o=e("./_nativeCreate"),n=Object.prototype.hasOwnProperty;t.exports=function(e){var t=this.__data__;if(o){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return n.call(t,e)?t[e]:void 0}},{"./_nativeCreate":67}],49:[function(e,t,r){var o=e("./_nativeCreate"),n=Object.prototype.hasOwnProperty;t.exports=function(e){var t=this.__data__;return o?void 0!==t[e]:n.call(t,e)}},{"./_nativeCreate":67}],50:[function(e,t,r){var o=e("./_nativeCreate");t.exports=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=o&&void 0===t?"__lodash_hash_undefined__":t,this}},{"./_nativeCreate":67}],51:[function(e,t,r){var o=/^(?:0|[1-9]\d*)$/;t.exports=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&o.test(e))&&e>-1&&e%1==0&&e<t}},{}],52:[function(e,t,r){var o=e("./isArray"),n=e("./isSymbol"),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;t.exports=function(e,t){if(o(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!n(e))||i.test(e)||!a.test(e)||null!=t&&e in Object(t)}},{"./isArray":79,"./isSymbol":91}],53:[function(e,t,r){t.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},{}],54:[function(e,t,r){var o,n=e("./_coreJsData"),a=(o=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||""))?"Symbol(src)_1."+o:"";t.exports=function(e){return!!a&&a in e}},{"./_coreJsData":39}],55:[function(e,t,r){var o=Object.prototype;t.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||o)}},{}],56:[function(e,t,r){t.exports=function(){this.__data__=[],this.size=0}},{}],57:[function(e,t,r){var o=e("./_assocIndexOf"),n=Array.prototype.splice;t.exports=function(e){var t=this.__data__,r=o(t,e);return!(r<0||(r==t.length-1?t.pop():n.call(t,r,1),--this.size,0))}},{"./_assocIndexOf":28}],58:[function(e,t,r){var o=e("./_assocIndexOf");t.exports=function(e){var t=this.__data__,r=o(t,e);return r<0?void 0:t[r][1]}},{"./_assocIndexOf":28}],59:[function(e,t,r){var o=e("./_assocIndexOf");t.exports=function(e){return o(this.__data__,e)>-1}},{"./_assocIndexOf":28}],60:[function(e,t,r){var o=e("./_assocIndexOf");t.exports=function(e,t){var r=this.__data__,n=o(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}},{"./_assocIndexOf":28}],61:[function(e,t,r){var o=e("./_Hash"),n=e("./_ListCache"),a=e("./_Map");t.exports=function(){this.size=0,this.__data__={hash:new o,map:new(a||n),string:new o}}},{"./_Hash":21,"./_ListCache":22,"./_Map":23}],62:[function(e,t,r){var o=e("./_getMapData");t.exports=function(e){var t=o(this,e).delete(e);return this.size-=t?1:0,t}},{"./_getMapData":41}],63:[function(e,t,r){var o=e("./_getMapData");t.exports=function(e){return o(this,e).get(e)}},{"./_getMapData":41}],64:[function(e,t,r){var o=e("./_getMapData");t.exports=function(e){return o(this,e).has(e)}},{"./_getMapData":41}],65:[function(e,t,r){var o=e("./_getMapData");t.exports=function(e,t){var r=o(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}},{"./_getMapData":41}],66:[function(e,t,r){var o=e("./memoize");t.exports=function(e){var t=o(e,(function(e){return 500===r.size&&r.clear(),e})),r=t.cache;return t}},{"./memoize":94}],67:[function(e,t,r){var o=e("./_getNative")(Object,"create");t.exports=o},{"./_getNative":42}],68:[function(e,t,r){var o=e("./_overArg")(Object.keys,Object);t.exports=o},{"./_overArg":71}],69:[function(e,t,r){var o=e("./_freeGlobal"),n="object"==typeof r&&r&&!r.nodeType&&r,a=n&&"object"==typeof t&&t&&!t.nodeType&&t,i=a&&a.exports===n&&o.process,s=function(){try{return a&&a.require&&a.require("util").types||i&&i.binding&&i.binding("util")}catch(e){}}();t.exports=s},{"./_freeGlobal":40}],70:[function(e,t,r){var o=Object.prototype.toString;t.exports=function(e){return o.call(e)}},{}],71:[function(e,t,r){t.exports=function(e,t){return function(r){return e(t(r))}}},{}],72:[function(e,t,r){var o=e("./_freeGlobal"),n="object"==typeof self&&self&&self.Object===Object&&self,a=o||n||Function("return this")();t.exports=a},{"./_freeGlobal":40}],73:[function(e,t,r){var o=e("./_memoizeCapped"),n=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,i=o((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(n,(function(e,r,o,n){t.push(o?n.replace(a,"$1"):r||e)})),t}));t.exports=i},{"./_memoizeCapped":66}],74:[function(e,t,r){var o=e("./isSymbol");t.exports=function(e){if("string"==typeof e||o(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},{"./isSymbol":91}],75:[function(e,t,r){var o=Function.prototype.toString;t.exports=function(e){if(null!=e){try{return o.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},{}],76:[function(e,t,r){t.exports=function(e,t){return e===t||e!=e&&t!=t}},{}],77:[function(e,t,r){var o=e("./_baseGet");t.exports=function(e,t,r){var n=null==e?void 0:o(e,t);return void 0===n?r:n}},{"./_baseGet":29}],78:[function(e,t,r){var o=e("./_baseIsArguments"),n=e("./isObjectLike"),a=Object.prototype,i=a.hasOwnProperty,s=a.propertyIsEnumerable,u=o(function(){return arguments}())?o:function(e){return n(e)&&i.call(e,"callee")&&!s.call(e,"callee")};t.exports=u},{"./_baseIsArguments":31,"./isObjectLike":88}],79:[function(e,t,r){var o=Array.isArray;t.exports=o},{}],80:[function(e,t,r){var o=e("./isFunction"),n=e("./isLength");t.exports=function(e){return null!=e&&n(e.length)&&!o(e)}},{"./isFunction":83,"./isLength":84}],81:[function(e,t,r){var o=e("./_baseGetTag"),n=e("./isObjectLike");t.exports=function(e){return!0===e||!1===e||n(e)&&"[object Boolean]"==o(e)}},{"./_baseGetTag":30,"./isObjectLike":88}],82:[function(e,t,r){var o=e("./_root"),n=e("./stubFalse"),a="object"==typeof r&&r&&!r.nodeType&&r,i=a&&"object"==typeof t&&t&&!t.nodeType&&t,s=i&&i.exports===a?o.Buffer:void 0,u=(s?s.isBuffer:void 0)||n;t.exports=u},{"./_root":72,"./stubFalse":95}],83:[function(e,t,r){var o=e("./_baseGetTag"),n=e("./isObject");t.exports=function(e){if(!n(e))return!1;var t=o(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},{"./_baseGetTag":30,"./isObject":87}],84:[function(e,t,r){t.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},{}],85:[function(e,t,r){t.exports=function(e){return null==e}},{}],86:[function(e,t,r){var o=e("./_baseGetTag"),n=e("./isObjectLike");t.exports=function(e){return"number"==typeof e||n(e)&&"[object Number]"==o(e)}},{"./_baseGetTag":30,"./isObjectLike":88}],87:[function(e,t,r){t.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},{}],88:[function(e,t,r){t.exports=function(e){return null!=e&&"object"==typeof e}},{}],89:[function(e,t,r){var o=e("./_baseGetTag"),n=e("./_getPrototype"),a=e("./isObjectLike"),i=Function.prototype,s=Object.prototype,u=i.toString,c=s.hasOwnProperty,l=u.call(Object);t.exports=function(e){if(!a(e)||"[object Object]"!=o(e))return!1;var t=n(e);if(null===t)return!0;var r=c.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&u.call(r)==l}},{"./_baseGetTag":30,"./_getPrototype":43,"./isObjectLike":88}],90:[function(e,t,r){var o=e("./_baseGetTag"),n=e("./isArray"),a=e("./isObjectLike");t.exports=function(e){return"string"==typeof e||!n(e)&&a(e)&&"[object String]"==o(e)}},{"./_baseGetTag":30,"./isArray":79,"./isObjectLike":88}],91:[function(e,t,r){var o=e("./_baseGetTag"),n=e("./isObjectLike");t.exports=function(e){return"symbol"==typeof e||n(e)&&"[object Symbol]"==o(e)}},{"./_baseGetTag":30,"./isObjectLike":88}],92:[function(e,t,r){var o=e("./_baseIsTypedArray"),n=e("./_baseUnary"),a=e("./_nodeUtil"),i=a&&a.isTypedArray,s=i?n(i):o;t.exports=s},{"./_baseIsTypedArray":33,"./_baseUnary":37,"./_nodeUtil":69}],93:[function(e,t,r){var o=e("./_arrayLikeKeys"),n=e("./_baseKeys"),a=e("./isArrayLike");t.exports=function(e){return a(e)?o(e):n(e)}},{"./_arrayLikeKeys":26,"./_baseKeys":34,"./isArrayLike":80}],94:[function(e,t,r){var o=e("./_MapCache");function n(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var o=arguments,n=t?t.apply(this,o):o[0],a=r.cache;if(a.has(n))return a.get(n);var i=e.apply(this,o);return r.cache=a.set(n,i)||a,i};return r.cache=new(n.Cache||o),r}n.Cache=o,t.exports=n},{"./_MapCache":24}],95:[function(e,t,r){t.exports=function(){return!1}},{}],96:[function(e,t,r){var o=e("./_baseToString");t.exports=function(e){return null==e?"":o(e)}},{"./_baseToString":36}],airtable:[function(e,t,r){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=o(e("./base")),a=o(e("./record")),i=o(e("./table")),s=o(e("./airtable_error")),u=function(){function e(t){void 0===t&&(t={});var r=e.default_config(),o=t.apiVersion||e.apiVersion||r.apiVersion;if(Object.defineProperties(this,{_apiKey:{value:t.apiKey||e.apiKey||r.apiKey},_apiVersion:{value:o},_apiVersionMajor:{value:o.split(".")[0]},_customHeaders:{value:t.customHeaders||{}},_endpointUrl:{value:t.endpointUrl||e.endpointUrl||r.endpointUrl},_noRetryIfRateLimited:{value:t.noRetryIfRateLimited||e.noRetryIfRateLimited||r.noRetryIfRateLimited},_requestTimeout:{value:t.requestTimeout||e.requestTimeout||r.requestTimeout}}),!this._apiKey)throw new Error("An API key is required to connect to Airtable")}return e.prototype.base=function(e){return n.default.createFunctor(this,e)},e.default_config=function(){return{endpointUrl:"https://api.airtable.com",apiVersion:"0.1.0",apiKey:"",noRetryIfRateLimited:!1,requestTimeout:3e5}},e.configure=function(t){var r=t.apiKey,o=t.endpointUrl,n=t.apiVersion,a=t.noRetryIfRateLimited,i=t.requestTimeout;e.apiKey=r,e.endpointUrl=o,e.apiVersion=n,e.noRetryIfRateLimited=a,e.requestTimeout=i},e.base=function(t){return(new e).base(t)},e.Base=n.default,e.Record=a.default,e.Table=i.default,e.Error=s.default,e}();t.exports=u},{"./airtable_error":2,"./base":3,"./record":15,"./table":17}]},{},["airtable"])("airtable")}},t={};function r(o){var n=t[o];if(void 0!==n)return n.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,r),a.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=r(997),t=r.n(e);function o(e=64){const t=new Uint8Array(e);return crypto.getRandomValues(t),Array.from(t).map((e=>String.fromCharCode(e))).map((e=>e.charCodeAt(0).toString(36))).join("").substring(0,e)}function n(e,t){console.error(e,t),chrome.storage.local.set({error:e+t.toString()})}const a="b91a2cb4-bf74-4614-bf84-35ea2337b69d",i=chrome.identity.getRedirectURL("oauth");function s(e,t=!1){chrome.storage.local.get("airtableTokenData",(r=>{var o={...r.airtableTokenData||{},...e,refreshedAt:(new Date).toISOString()};t||(o.retrievedAt=(new Date).toISOString()),chrome.storage.local.set({airtableTokenData:o},(()=>{console.log("Token data stored successfully"),async function(e){try{const t=await fetch("https://api.airtable.com/v0/meta/bases",{headers:{Authorization:`Bearer ${e}`}}),r=await t.json();r.error?n("Error fetching bases:",r.error):(console.log("Bases:",r.bases),chrome.storage.local.get("airtableTokenData",(e=>{const t={...e.airtableTokenData,bases:r.bases};chrome.storage.local.set({airtableTokenData:t},(()=>{console.log("Bases data stored successfully")}))})))}catch(e){n("Failed to fetch bases:",e)}}(e.access_token)}))}))}chrome.alarms.create("checkAirtableChanges",{periodInMinutes:.1}),chrome.alarms.onAlarm.addListener((e=>{"checkAirtableChanges"===e.name&&chrome.storage.local.get("airtableTokenData",(e=>{if(e.airtableTokenData){const r=e.airtableTokenData;if(!function(e){const t=new Date,r=e.refresh_expires_in&&e.retrievedAt?new Date(new Date(e.retrievedAt).getTime()+1e3*e.refresh_expires_in):null,o=e.expires_in&&e.refreshedAt?new Date(new Date(e.refreshedAt).getTime()+1e3*e.expires_in):null;return console.log(t,o,r),!r||t>=r?(chrome.storage.local.remove("airtableTokenData",(()=>{console.log("Token data removed successfully")})),n("Token is expired"),!1):!(!o||t>=o)||(console.log("Access token expired, renewing token..."),(i=e.refresh_token,new Promise((async(e,t)=>{try{const r=await fetch("https://airtable.com/oauth2/v1/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"refresh_token",client_id:a,refresh_token:i})}),o=await r.json();o.error?(n("Token Refresh Error:",o.error),t(o.error)):(console.log("New Access Token:",o.access_token),s(o,!0),e(o))}catch(e){n("Token Refresh Failed:",e),t(e)}}))).catch((()=>{})),!1);var i}(r))return;0===r.bases.length?n("No bases found."):function(e){var r=new(t())({apiKey:e.access_token}).base(e.bases[0].id);(async function(e){let t=[];return await new Promise(((r,o)=>{const a=new Date;a.setDate(a.getDate()-500),e("Orders").select({view:"Grid view",fields:["Order Updated Post Kitchen Notification"],maxRecords:200}).eachPage(((e,r)=>{t=t.concat(e),r()}),(e=>{e?(n(e),o(e)):r()}))})),function(e){return e.filter((e=>!!e.get("Order Updated Post Kitchen Notification")))}(t)})(r).then((e=>{const t=e.reduce(((e,t)=>(e[t.id]={...t.fields,id:t.id},e)),{});chrome.storage.local.get("recordsById",(e=>{const o=e.recordsById||{},a=Object.keys(t).filter((e=>!o[e]));a.length>0&&Object.keys(o).length>0&&(console.log("New records added:",a),async function(){const e=chrome.runtime.getURL("audio.html");await chrome.offscreen.hasDocument()&&await chrome.offscreen.closeDocument(),await chrome.offscreen.createDocument({url:e,reasons:["AUDIO_PLAYBACK"],justification:"notification"})}(),async function(e,t){return new Promise(((r,o)=>{e("Orders").find(t,((e,t)=>{e?(n(e),o(e)):r(t)}))}))}(r,a[0]).then((e=>{let t={...e.fields,dateAdded:(new Date).toISOString()};chrome.storage.local.get("lastCapturedRecords",(e=>{const r=e.lastCapturedRecords||[];r.push(t),chrome.storage.local.set({lastCapturedRecords:r},(()=>{console.log("All records stored locally by Order ID",r)}))}))}))),chrome.storage.local.set({recordsById:t},(()=>{console.log("All records stored locally by Order ID")}))}))})).catch((e=>{n("Error retrieving records: "+e)}))}(r)}}))})),chrome.runtime.onMessage.addListener(((e,t,r)=>("authenticate"===e.action?async function(){try{const e=o(),t=o(),r=await async function(e){const t=(new TextEncoder).encode(e),r=await crypto.subtle.digest("SHA-256",t);return btoa(String.fromCharCode(...new Uint8Array(r))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}(t),u=["data.records:read","user.email:read","schema.bases:read","webhook:manage"].join(" "),c=`https://airtable.com/oauth2/v1/authorize?client_id=${a}&redirect_uri=${encodeURIComponent(i)}&response_type=code&scope=${encodeURIComponent(u)}&state=${e}&code_challenge=${r}&code_challenge_method=S256`;console.log("Auth URL:",c),chrome.identity.launchWebAuthFlow({url:c,interactive:!0},(async r=>{if(chrome.runtime.lastError)return void n("OAuth Error:",chrome.runtime.lastError.message);const o=new URLSearchParams(new URL(r).search),u=o.get("code");o.get("state")===e?(console.log("Authorization Code:",u),await async function(e,t){try{const r=await fetch("https://airtable.com/oauth2/v1/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({client_id:a,code:e,redirect_uri:i,grant_type:"authorization_code",code_verifier:t})}),o=await r.json();o.error?n("Token Exchange Error:",o.error):(console.log(o),console.log("Access Token:",o.access_token),s(o))}catch(e){n("Token Exchange Failed:",e)}}(u,t)):n("State mismatch. Possible CSRF attack!")}))}catch(e){n("Authentication Error:",e)}}().then((()=>r({success:!0}))).catch((e=>r({error:e.message}))):"getBasesList"===e.action&&chrome.storage.local.get("airtableTokenData",(e=>{e.airtableTokenData&&r(e.airtableTokenData)})),!0)))})()})();